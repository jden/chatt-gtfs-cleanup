# chatt-gtfs-cleanup

scripts to clean up CARTA's GTFS data feed


## Installation

Required: [Node.js](http://nodejs.org/)

From a command line, navigate to a new folder to store the scripts in and run:
```console
npm install jden/chatt-gtfs-cleanup
cd node_modules
cd carta
```

From this folder, you can now run the following commands to execute this script:


## Usage
```
node cli --input <directory> --output <directory>

Examples:
  node cli --input c:/gtfs --outpue c:/gtfs_clean    Runs the clean up scripts on data in c:/gtfs.
        New files will be written to c:/gtfs_bak


Options:
  -i, --input   Specify the input directory   [required]
  -o, --output  Specify the output directory  [required]
```

## What it does

This script attempts to automatically correct some validation errors in the GTFS files generated by BusTools.

### Route Short Name Is Contained In Long Name
Removes duplicated information in routes.txt

### Invalid values in shape_pt_sequence
Fixes improperly formatted values in shapes.txt

### Trip Headsign Contains Route Short Name
### Trip Headsign Contains Route Long Name
Removes duplicated information in trips.txt

## Troubleshooting

### No output is displayed
If there are no corrections made, nothing will print in the script output. Check the files in the destination directory; they should be present & valid.

### Files missing in output directory
The script only copies over files which it knows how to clean up. You can copy over the rest of the files which make up a GTFS feed from the input directory unchanged.


## Contact

Jason Denizac <jden@codeforamerica.org>